<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Josh Jackson" />


<title>Untitled</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">psych 5067: quant methods II </a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="2017_Syllabus.html">syllabus</a>
</li>
<li>
  <a href="readings.html">readings</a>
</li>
<li>
  <a href="data.html">data</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    take home projects
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="takehome-1.html">takehome-1</a>
    </li>
    <li>
      <a href="takehome-2.html">takehome-2</a>
    </li>
    <li>
      <a href="takehome-3.html">takehome-3</a>
    </li>
    <li>
      <a href="takehome-4.html">takehome-4</a>
    </li>
    <li>
      <a href="takehome-5.html">takehome-5</a>
    </li>
    <li>
      <a href="takehome-6.html">takehome-6</a>
    </li>
    <li>
      <a href="takehome-7.html">takehome-7</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    lectures
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Introduction-1.html">1. intro</a>
    </li>
    <li>
      <a href="Correlations-2.html">2. correlations</a>
    </li>
    <li>
      <a href="Regression-3.html">3. regression</a>
    </li>
    <li>
      <a href="MultipleR-4.html">4. multiple regression</a>
    </li>
    <li>
      <a href="Assumptions-5.html">5. assumptions</a>
    </li>
    <li>
      <a href="diagnostics.html">5a. diagnostics</a>
    </li>
    <li>
      <a href="interactions-6.html">6. interactions</a>
    </li>
    <li>
      <a href="logistic-7.html">7. logistic</a>
    </li>
    <li>
      <a href="anova-8.html">8. Factorial ANOVA</a>
    </li>
    <li>
      <a href="RMANOVA_MLM-9.html">9. RM &amp; MLM</a>
    </li>
    <li>
      <a href="Bayesian-10.html">10. Bayesian</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Untitled</h1>
<h4 class="author"><em>Josh Jackson</em></h4>
<h4 class="date"><em>4/26/2017</em></h4>

</div>


<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## Loading tidyverse: tibble
## Loading tidyverse: tidyr
## Loading tidyverse: purrr</code></pre>
<pre><code>## Conflicts with tidy packages ----------------------------------------------</code></pre>
<pre><code>## filter(): dplyr, stats
## lag():    dplyr, stats
## recode(): dplyr, car
## some():   purrr, car</code></pre>
<pre class="r"><code>mlm_data &lt;- read.csv(&quot;~/Box Sync/5067 Regression Spring/regression/data/mlm_data.csv&quot;) </code></pre>
<pre class="r"><code># create
# mlm_data &lt;- read.csv(&quot;~/Box Sync/5067 Regression Spring/regression/data/mlm_data_full.csv&quot;)
#  mlm_data %&gt;%
#   select(PIB_ID, Neuro_Dx, contains(&quot;DigSpn_Btotal&quot;)) %&gt;%
#   mutate(DigSpn_Btotal_0  = na_if(DigSpn_Btotal_0, 9999.0)) %&gt;%
#   separate(PIB_ID, c(&#39;omit&#39;, &#39;ID&#39; ), sep=&quot;-&quot;) %&gt;%
#   select(-omit) %&gt;%
#   write.csv(file = &quot;mlm_data.csv&quot;)

mlm_data_long &lt;- mlm_data %&gt;%
  select(-negT1, - negT2, -negT3, -negT4) %&gt;% 
  gather(time, PA, 2:5) %&gt;%  
  separate(time, c(&#39;omit&#39;, &#39;wave&#39; ), sep=&quot;T&quot;) %&gt;% 
  select(-omit) 

mlm_data_long$wave &lt;- as.numeric(mlm_data_long$wave)
mlm_data_long$gender &lt;- as.factor(mlm_data_long$gender)
mlm_data_long$group &lt;- as.factor(mlm_data_long$group)

cor(mlm_data, use = &quot;pairwise.complete.obs&quot;)</code></pre>
<pre><code>##                  ID       posT1        posT2       posT3       posT4
## ID      1.000000000 -0.01513106 -0.004615439 -0.05314683 -0.05779904
## posT1  -0.015131060  1.00000000  0.363300221  0.30503858  0.34102794
## posT2  -0.004615439  0.36330022  1.000000000  0.46217680  0.36660250
## posT3  -0.053146827  0.30503858  0.462176801  1.00000000  0.36081485
## posT4  -0.057799037  0.34102794  0.366602501  0.36081485  1.00000000
## negT1  -0.051114385 -0.13052715 -0.132755574 -0.10566286 -0.10574241
## negT2  -0.039846168 -0.14052660 -0.102754873 -0.13410316 -0.10554638
## negT3  -0.001057088 -0.16703189 -0.180794280 -0.23481639 -0.08407488
## negT4  -0.027358720 -0.15492162 -0.136888571 -0.13997423 -0.13310715
## gender -0.022762063  0.01375107  0.027948270  0.10500025  0.11536030
## group  -0.055615861 -0.06390029 -0.012213795 -0.04496494 -0.02235116
##              negT1       negT2        negT3         negT4        gender
## ID     -0.05111439 -0.03984617 -0.001057088 -0.0273587198 -0.0227620628
## posT1  -0.13052715 -0.14052660 -0.167031886 -0.1549216207  0.0137510743
## posT2  -0.13275557 -0.10275487 -0.180794280 -0.1368885713  0.0279482703
## posT3  -0.10566286 -0.13410316 -0.234816391 -0.1399742258  0.1050002478
## posT4  -0.10574241 -0.10554638 -0.084074883 -0.1331071528  0.1153603047
## negT1   1.00000000  0.41630241  0.317031908  0.2733577404  0.0478893520
## negT2   0.41630241  1.00000000  0.353175240  0.3585679735  0.0442486830
## negT3   0.31703191  0.35317524  1.000000000  0.3021308224  0.1208647736
## negT4   0.27335774  0.35856797  0.302130822  1.0000000000 -0.0007905018
## gender  0.04788935  0.04424868  0.120864774 -0.0007905018  1.0000000000
## group   0.12133887  0.08815188  0.066789535  0.0435765007  0.0088806120
##               group
## ID     -0.055615861
## posT1  -0.063900292
## posT2  -0.012213795
## posT3  -0.044964937
## posT4  -0.022351162
## negT1   0.121338874
## negT2   0.088151876
## negT3   0.066789535
## negT4   0.043576501
## gender  0.008880612
## group   1.000000000</code></pre>
<pre class="r"><code>?cor
library(psych)</code></pre>
<pre><code>## 
## Attaching package: &#39;psych&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:car&#39;:
## 
##     logit</code></pre>
<pre><code>## The following objects are masked from &#39;package:ggplot2&#39;:
## 
##     %+%, alpha</code></pre>
<pre class="r"><code>describe(mlm_data$posT1)</code></pre>
<pre><code>##    vars    n mean  sd median trimmed  mad min max range  skew kurtosis
## X1    1 1684 3.59 0.9   3.68    3.64 0.99   1   5     4 -0.46    -0.45
##      se
## X1 0.02</code></pre>
<pre class="r"><code>library(lme4)</code></pre>
<pre><code>## Loading required package: Matrix</code></pre>
<pre><code>## 
## Attaching package: &#39;Matrix&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     expand</code></pre>
<pre><code>## 
## Attaching package: &#39;lme4&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:brms&#39;:
## 
##     ngrps</code></pre>
<pre class="r"><code>library(reghelper)</code></pre>
<pre><code>## 
## Attaching package: &#39;reghelper&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:psych&#39;:
## 
##     ICC</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     beta</code></pre>
<pre class="r"><code>model.1 &lt;- lmer(PA ~ 1 + ( 1 | ID), data = mlm_data_long)
summary(model.1)</code></pre>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: PA ~ 1 + (1 | ID)
##    Data: mlm_data_long
## 
## REML criterion at convergence: 16007.4
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.7256 -0.6013  0.0793  0.6623  2.9067 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev.
##  ID       (Intercept) 0.2666   0.5164  
##  Residual             0.4680   0.6841  
## Number of obs: 6736, groups:  ID, 1684
## 
## Fixed effects:
##             Estimate Std. Error t value
## (Intercept)  3.65524    0.01509   242.2</code></pre>
<pre class="r"><code>ICC(model.1)</code></pre>
<pre><code>## [1] 0.3629343</code></pre>
<pre class="r"><code>model.2 &lt;- lmer(PA ~ wave + ( 1 | ID), data = mlm_data_long)
summary(model.2)</code></pre>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: PA ~ wave + (1 | ID)
##    Data: mlm_data_long
## 
## REML criterion at convergence: 15996
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.8041 -0.6028  0.0736  0.6592  2.9860 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev.
##  ID       (Intercept) 0.2671   0.5168  
##  Residual             0.4664   0.6829  
## Number of obs: 6736, groups:  ID, 1684
## 
## Fixed effects:
##             Estimate Std. Error t value
## (Intercept) 3.573504   0.023958  149.16
## wave        0.032696   0.007442    4.39
## 
## Correlation of Fixed Effects:
##      (Intr)
## wave -0.777</code></pre>
<pre class="r"><code>model.3 &lt;- lmer(PA ~ wave + ( wave | ID), data = mlm_data_long)
summary(model.3)</code></pre>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: PA ~ wave + (wave | ID)
##    Data: mlm_data_long
## 
## REML criterion at convergence: 15988.2
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.6386 -0.5950  0.0748  0.6485  2.9890 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr 
##  ID       (Intercept) 0.364205 0.60349       
##           wave        0.009765 0.09882  -0.52
##  Residual             0.450091 0.67089       
## Number of obs: 6736, groups:  ID, 1684
## 
## Fixed effects:
##             Estimate Std. Error t value
## (Intercept) 3.573504   0.024843  143.84
## wave        0.032696   0.007698    4.25
## 
## Correlation of Fixed Effects:
##      (Intr)
## wave -0.795</code></pre>
<pre class="r"><code>model.4 &lt;- lmer(PA ~ wave*gender + ( wave | ID), data = mlm_data_long)
summary(model.4)</code></pre>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: PA ~ wave * gender + (wave | ID)
##    Data: mlm_data_long
## 
## REML criterion at convergence: 15967.6
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.5841 -0.5917  0.0708  0.6489  2.9919 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr 
##  ID       (Intercept) 0.364230 0.6035        
##           wave        0.008798 0.0938   -0.53
##  Residual             0.450091 0.6709        
## Number of obs: 6736, groups:  ID, 1684
## 
## Fixed effects:
##               Estimate Std. Error t value
## (Intercept)   3.597415   0.034825  103.30
## wave          0.001241   0.010738    0.12
## gender1      -0.048689   0.049695   -0.98
## wave:gender1  0.064050   0.015323    4.18
## 
## Correlation of Fixed Effects:
##             (Intr) wave   gendr1
## wave        -0.796              
## gender1     -0.701  0.558       
## wave:gendr1  0.558 -0.701 -0.796</code></pre>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
